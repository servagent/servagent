# Servagent Configuration
# Copy this file to .env and adjust values.

# Host and port to bind
SERVAGENT_HOST=0.0.0.0
SERVAGENT_PORT=8765

# Public base URL (set automatically by install.sh when a domain is provided).
# Used to derive the OAuth issuer URL. Include port only if non-standard.
# No trailing slash, no path.
# SERVAGENT_BASE_URL=https://mcp.example.com

# Transport: "streamable-http" (recommended) or "sse" (legacy)
SERVAGENT_TRANSPORT=streamable-http

# API key for client authentication. Generate one with:
#   python -c "import secrets; print(secrets.token_urlsafe(48))"
# Leave empty to disable authentication (NOT recommended in production).
SERVAGENT_API_KEY=

# Working directory for command execution
SERVAGENT_WORK_DIR=

# Command execution timeout in seconds
SERVAGENT_COMMAND_TIMEOUT=300

# Maximum output size in bytes
SERVAGENT_MAX_OUTPUT_SIZE=1000000

# Maximum upload file size in bytes (default 100 MB)
SERVAGENT_UPLOAD_MAX_SIZE=100000000

# TLS — Set both to enable HTTPS (no need for Nginx).
# Use setup-tls.sh to obtain certificates from Let's Encrypt automatically.
# SERVAGENT_TLS_CERTFILE=/etc/letsencrypt/live/your-domain.com/fullchain.pem
# SERVAGENT_TLS_KEYFILE=/etc/letsencrypt/live/your-domain.com/privkey.pem

# Tool selection — comma-separated list of tool names to expose, or "all".
# Default exposes essential tools including file operations (write_file, read_file,
# edit_file) which are faster and more reliable than using execute_command with
# heredocs for writing files.
# Use "all" to expose every tool (recommended for large models like Claude, GPT-4).
# Available: execute_command, read_file, write_file, edit_file, list_directory,
#   move_path, copy_path, delete_path, read_file_binary, write_file_binary,
#   upload_file, list_processes, kill_process, system_info, network_info,
#   service_action, tail_file, get_environment
SERVAGENT_TOOLS=execute_command,write_file,read_file,edit_file,upload_file

# Logging level: DEBUG, INFO, WARNING, ERROR
SERVAGENT_LOG_LEVEL=INFO

# --- OAuth 2.0 ---
# Set the issuer URL to enable OAuth 2.0 for the /mcp endpoint.
# MUST include the /mcp path (e.g. https://mcp.example.com/mcp).
# Enables dynamic client registration (RFC 7591), authorization code
# flow with PKCE, and token revocation. The simple Bearer token (API_KEY)
# continues to work for all endpoints (/mcp, /sse, /messages/, /upload).
# SERVAGENT_OAUTH_ISSUER_URL=

# Operator credentials — dual purpose:
#   1. Static OAuth client: pre-registered at startup so MCP clients (like Claude.ai)
#      can use these credentials directly in the OAuth flow (authorize → token)
#      without calling /mcp/register first.
#   2. Registration protection: protects POST /mcp/register with HTTP Basic Auth
#      for dynamic client registration (scripts, SDKs).
# Both must be set together. Generate with:
#   bash generate-oauth-credentials.sh
# SERVAGENT_OAUTH_CLIENT_ID=
# SERVAGENT_OAUTH_CLIENT_SECRET=

# Path to the SQLite database for OAuth client and token persistence.
# Default: ~/.servagent/oauth.db
# SERVAGENT_OAUTH_DB_PATH=
